{% extends 'base.html' %}

{% block title %}{{article.article_title}}{% endblock %}

{% block content %}
    <div class="container shadow-lg bg-white rounded">

        <br>
        <div>
            <span class="font-weight-bolder">
                {% if article.user %}
                    {{article.user.username}}
                {% else %}
                    Noname
                {% endif %}
            </span>
            <span class="text-secondary small em">{{article.pub_date}}</span>
            {% if article.was_publish_recently %}
                [Новая статья]
            {% endif %}
        </div>
        <h2>{{article.article_title}}</h2>


        <p>{{article.article_text|safe}}</p>





        <hr>

        Последние комментарии: <br>
        {% if last_comments %}
            {% for c in last_comments %}
                <p>
                    <strong>{{c.author_name}}</strong><br>
                    <p>{{c.comment_text}}</p>
                </p>
            {% endfor %}
        {% else %}
            Комментариев пока нет будьте первым =)
        {% endif %}

        <hr>

        <form action="{% url 'main:post_comment' article.id %}" method="post">
            {% csrf_token %}
            <input type="text" required placeholder="Ваше имя" name="name" class="form-control col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3"><br>
            <textarea name="text" required placeholder="Текст комментария" cols="60" rows="6" class="form-control"></textarea><br>

            <button type="submit" class="btn btn-success">Отправить комментарий</button>
        </form>
        <br>
    </div>
{% endblock %}
